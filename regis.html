<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Data Table</title>  
    <link rel="stylesheet" href="styleRegis.css"> <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"> <!-- BOOTSTRAP -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script> <!-- JQUERY -->
    <script src="https://kit.fontawesome.com/0b9252af8d.js" crossorigin="anonymous"></script> <!-- ICON FONTAWESOME -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" /> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Encode+Sans+Expanded&family=Wix+Madefor+Text:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Encode+Sans+Expanded&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Wix+Madefor+Text:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">
</head>

<body>
<!-- ================= NAVBAR HEADER ============================ -->

    <div class="iniNavbar fixed-top">
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
                    <div class="container-fluid mx-5">
                        <a id="logo" class="navbar-brand" href="#">
                            <img src="Resource/UMN.png" />
                        </a>
                        <div class="info d-flex justify-content-between">
                            <div class="hello"></div>
                            <div id="jam" class="mx-auto" style="text-align: center; font-size: 24px;"></div>
                        </div>            
                        <button class="navbar-toggler text-end" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse fs-5" id="nav">
                            <ul class="navbar-nav ms-auto" id="nav3">
                                <li class="nav-item text-dark">
                                    <a id="navKecil" class="nav-link mx-2" href="home.html">Home</a>
                                </li>
                                <li class="nav-item text-dark">
                                    <a id="navKecil" class="nav-link mx-2" href="regis.html">Register</a>
                                </li>
                                <li class="nav-item text-dark">
                                    <a id="navKecil" class="nav-link mx-2" href="about.html">About Us</a>
                                </li>
                                <li class="nav-item text-center" >
                                    <a class="nav-link text-white rounded-5 pe-none" id="loginNav" href="">
                                        <i id="navKecil" class="fa-regular fa-user"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>                
                    </div>
                </nav>
            </div>
    <div id="Space"></div>


<!-- =============================CONTAINER=================================== -->

 <div class="container-fluid"> <!-- Bungkus Container -->


    <!-- ========================== ALERT ================================== -->
            <div class="toast-container position-fixed bottom-0 end-0 p-3 notifications">
                 <!-- SUCCESS ALERT -->
                <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header bg-success">
                        <div class="text-white fw-bold fs-5 mx-3"><i class="fa-solid fa-circle-check"></i></div>
                        <strong class="me-auto fw-bold text-white mt-2"><h5>Success!</h5></strong>
                        <button type="button" class="btn-close btn-close-white me-2" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body"><p>Mahasiswa Baru Telah Berhasil Ditambahkan!</p></div>
                </div>

                <!-- DELETE ALERT -->
                <div id="deleteToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header bg-danger">
                        <div class="text-white fw-bold fs-5 mx-3"><i class="fa-solid fa-trash-can"></i></div>
                        <strong class="me-auto fw-bold text-white mt-2"><h5>Deleted!</h5></strong>
                        <button type="button" class="btn-close btn-close-white me-2" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body"><p>Data Mahasiswa Telah Berhasil Dihapus!</p></div>
                </div>

                <!-- UPDATE ALERT -->
                <div id="updateToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header bg-info">
                        <div class="text-white fw-bold fs-5 mx-3"><i class="fa-solid fa-circle-info"></i></div>
                        <strong class="me-auto fw-bold text-white mt-2"><h5>Updated!</h5></strong>
                        <button type="button" class="btn-close btn-close-white m-2" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">Data Mahasiswa Telah Berhasil Di Perbaharui.</div>
                </div>

                <!-- WARNING ALERT -->
                <div id="warningToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header bg-warning">
                        <div class="text-white fw-bold fs-5 mx-3"><i class="fa-solid fa-triangle-exclamation"></i></div>
                        <strong class="me-auto fw-bold text-white mt-2"><h5>Warning!</h5></strong>
                        <button type="button" class="btn-close btn-close-white m-2" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">Data Tidak Dapat Ditambahkan.</div>
                </div>
            </div>

        
   <!-- ========================== INFO Nama ================================ -->

        <div id="namaOutput"></div>
    <!-- ====================================== TABLE =================================================== -->
        
            <div id="bungkusTabel" class="overflow-auto">
                <div class="d-flex p-4">
                    <!-- ADD BUTTON -->
                    <div id="tambahData" style="width: 200px;">
                        <button type="button" class="btn btn-light" data-bs-toggle="modal" data-bs-target="#tambahModal">Add New Data</button>
                    </div>
                    <!-- SEARCH BAR -->
                    <div class="spasiAjah" style="width: 50px;"></div>
                    <div class="search ms-auto">
                        <div class="input-group">
                            <div>
                                <p class="text-white me-3" style="font-size: 20px; font-weight: 600;">Search By Name: </p>
                            </div>
                            <div>
                                <input type="text" class="form-control form-control-sm searchBar w-auto" id="searchBar" placeholder="Search" aria-label="Search" aria-describedby="button-addon2">
                            </div>
                        </div>
                    </div>
                </div>

                <table class="table table-hover table-opacity table-bordered">
                    <thead>
                        <tr id="tableRow">
                            <th class="centered">NIM</th>
                            <th class="centered">Name</th>
                            <th class="centered">Address</th>
                            <th class="centered">Status Mahasiswa</th>
                            <th class="centered">Options</th>
                        </tr>
                    </thead>

                    <tbody id="tableBody">

                    </tbody>

                </table>
            </div>
<!-- ==================================== MODAL ======================================== -->
    <!-- ==================================== MODAL TAMBAH ======================================== -->
    <div>
            <div class="modal fade" id="tambahModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header" style="background-color: #3F72AF">
                            <h2 class="modal-title fs-5 text-white" id="staticBackdropLabel">Input New Data</h2>
                            <button type="button" class="btn-close" style="color: white;" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                        <div class="modal-body" id="ModalTambah">
                            <div class="jarak d-flex">
                                <div class="col-md-3">
                                    <p>NIM</p>
                                </div>
                                <div class="input-group input-group-sm mb-3 col-md-6">
                                    <input type="number" class="form-control" id="numberIn" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" required>
                                </div>
                            </div>
                            <div class="jarak d-flex">
                                <div class="col-md-3">
                                    <p>Nama</p>
                                </div>
                                <div class="input-group input-group-sm mb-3 col-md-6">
                                    <input type="text" class="form-control" id="nameIn" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" required>
                                </div>
                            </div>
                            <div class="jarak d-flex">
                                <div class="col-md-3">
                                    <p>Address</p>
                                </div>
                                <div class="input-group input-group-sm mb-3 col-md-6">
                                    <input type="text" class="form-control" style="width: 50px;" id="addressIn" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" required>
                                </div>
                            </div>
                            <div>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-outline-success" id="activeBtn" data-bs-toggle="button" aria-pressed="true">Active Student</button>
                                    <button type="button" class="btn btn-outline-danger" id="inactiveBtn" data-bs-toggle="button" aria-pressed="true">Inactive Student</button>
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="fa-solid fa-xmark"></i> Close</button>
                            <button type="button" id="submitBtn" class="btn text-white" style="background-color: #3F72AF;"><i class="fa-solid fa-plus"></i> Add</button>
                        </div>
                    </div>
                </div>
            </div>

    <!-- ======================================== MODAL EDIT ============================================= -->

        <div class="modal fade" id="editModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header text-white" style="background-color: #3F72AF">
                        <h2 class="modal-title fs-5" id="staticBackdropLabel">Edit Data</h2>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
            
                    <div class="modal-body" id="ModalTambah">
                        <div class="jarak d-flex">
                            <div class="col-md-3">
                                <p>NIM</p>
                            </div>
                            <div class="input-group input-group-sm mb-3 col-md-6">
                                <input type="number" class="form-control" id="nimEdit" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" disabled>
                            </div>
                        </div>
                        <div class="jarak d-flex">
                            <div class="col-md-3">
                                <p>Nama</p>
                            </div>
                            <div class="input-group input-group-sm mb-3 col-md-6">
                                <input type="text" class="form-control" id="nameEdit" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
                            </div>
                        </div>
                        <div class="jarak d-flex">
                            <div class="col-md-3">
                                <p>Address</p>
                            </div>
                            <div class="input-group input-group-sm mb-3 col-md-6">
                                <input type="text" class="form-control" id="addressEdit">
                            </div>
                        </div>
                        <div class="d-flex">
                            <div class="col-md-3">
                                <p>Status</p>
                            </div>
                            <div class="col-md-10">
                                <button type="button" class="btn btn-outline-success" id="activeEditBtn" data-bs-toggle="button" aria-pressed="true">Active Student</button>
                                <button type="button" class="btn btn-outline-danger" id="inactiveEditBtn" data-bs-toggle="button" aria-pressed="true">Inactive Student</button>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="fa-solid fa-xmark"></i> Close</button>
                        <button type="button" id="saveEditBtn" class="btn btn-primary saveBtn"><i class="fa-solid fa-floppy-disk"></i> Save</button>
                    </div>
                </div>
            </div>
        </div>

    <!-- ========================================= MODAL HAPUS ================================================== -->

        <div class="modal fade" id="hapusModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">

                    <div class="modal-header text-white" style="background-color: #3F72AF">
                    <h2 class="modal-title fs-5" id="staticBackdropLabel">Hapus Data</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <div class="input-group input-group-sm mb-2">
                            <text>Are You Sure Want To Erase?</text>
                        </div>
                    </div>

                    <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="fa-solid fa-xmark"></i> Cancel</button>
                    <button type="button" id="deleteConfirmBtn" class="btn btn-success deleteConfirmBtn"><i class="fa-solid fa-check"></i> Confirm</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ==================================== BAWAH ============================================================ -->
<div class="bawahHitam">
    <div class="wave">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" style="filter: blur(1px);;"><path fill="#F9F7F7" fill-opacity="1" d="M0,256L34.3,266.7C68.6,277,137,299,206,272C274.3,245,343,171,411,149.3C480,128,549,160,617,181.3C685.7,203,754,213,823,208C891.4,203,960,181,1029,192C1097.1,203,1166,245,1234,240C1302.9,235,1371,181,1406,154.7L1440,128L1440,320L1405.7,320C1371.4,320,1303,320,1234,320C1165.7,320,1097,320,1029,320C960,320,891,320,823,320C754.3,320,686,320,617,320C548.6,320,480,320,411,320C342.9,320,274,320,206,320C137.1,320,69,320,34,320L0,320Z"></path></svg>
    </div>
    <div class="fullBawah">
        <div id = "isi" class="d-flex justify-content-between">
            <section class = "left col-md-6">
                <div class="logo2">
                    <img src="Resource/UMN.png"></img>
                </div>
                <p>Universitas Multimedia Nusantara (UMN) adalah institusi pendidikan tinggi yang berlokasi di Tangerang, Indonesia. Sebagai universitas yang berfokus pada multimedia, UMN menawarkan beragam program studi yang mengintegrasikan teknologi informasi, desain, dan konten multimedia.</p>
                <div class="sosmed">
                    <a href="https://www.facebook.com/UniversitasMultimediaNusantara/?locale=id_ID">
                        <img src="Resource/facebook.png" alt="FB">
                    </a>
                    <a href="https://www.instagram.com/universitasmultimedianusantara/">
                        <img src="Resource/instagram.png" alt="IG">
                    </a>
                    <a href="https://www.youtube.com/c/UniversitasMultimediaNusantara">
                        <img src="Resource/youtube.png" alt="YT">
                    </a>
                </div>
            </section>
            <section class="tengah1 col-md-3 p-2">
                <p>Quick Links</p>
                <a href="home.html">Home</a><br />
                <a href="regis.html">Register</a><br />
                <a href="about.html">About Us</a><br />

            </section>
        </div>
        <hr />
        <p>Copyright &copy 2024 | All rights reserved</p>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script>

    // ================================ LOGIKA UNTUK MENAMBAH DATA ================================= // 

    $('#submitBtn').click(function() {
        var nim = $('#numberIn').val();
        var nama = $('#nameIn').val();
        var alamat = $('#addressIn').val();
        var status = "";

        if ($("#activeBtn").hasClass("active")) {
            status = "Active";
        } else if ($("#inactiveBtn").hasClass("active")) {
            status = "Inactive";
        } else {
            $('#warningToast').toast('show');
            return;
        }

        if (nim == '' || nama == '' || alamat == '') {
            $('#warningToast').toast('show');
            return;
        }

        var statusId = status === "Active" ? "colorActive" : "colorInactive";
        var statusText = status === "Active" ? "Active" : "Inactive";

        var statusDiv = $('<div id="' + statusId + '" class="p-2 text-center fw-bold border rounded-pill" style="width: 150px;">' + statusText + '</div>');
        var statusColumn = $('<td class="d-flex justify-content-center"></td>').append(statusDiv);

        var optionColumn = $('<td></td>').html(
            '<div class="d-flex justify-content-center">' +
            '<button type="button" id="buttonCustom" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#editModal">Edit</button>' +
            '<button type="button" id="buttonCustom" class="btn btn-danger deleteBtn" data-bs-toggle="modal" data-bs-target="#hapusModal">Delete</button>' +
            '</div>');

        var newRow = $('<tr>' +
            '<td>' + nim + '</td>' +
            '<td>' + nama + '</td>' +
            '<td>' + alamat + '</td>' +
            '</tr>');

        newRow.append(statusColumn);
        newRow.append(optionColumn);

        $('#tableBody').append(newRow);

        $('#successToast').toast('show');

        $('#tambahModal').modal('hide');

        $('#numberIn').val('');
        $('#nameIn').val('');
        $('#addressIn').val('');
        status = "";
    });

    //=============================================================================================================//


    // ================================ INI LOGIKA UNTUK HAPUS DATA ============================================== //

        $('#tableBody').on('click', '.deleteBtn', function() {
            $('#hapusModal').modal('show');
            var row = $(this).closest('tr');
            $('#hapusModal').data('row', row);
        });

        $('#deleteConfirmBtn').click(function() {
            var row = $('#hapusModal').data('row');
            row.remove();
            $('#hapusModal').modal('hide');
        });

    //==============================================================================================================//

        
    // ============================= LOGIKA UNTUK MENGEDIT DATA =================================================== //

        $('#tableBody').on('click', '.btn-info', function() {
        var row = $(this).closest('tr');
        var cols = row.find('td');

        $('#nimEdit').val(cols[0].innerText);
        $('#nameEdit').val(cols[1].innerText);
        $('#addressEdit').val(cols[2].innerText);

        $('#activeEditBtn').removeClass('active');
        $('#inactiveEditBtn').removeClass('active');

        if (cols[3].innerText == 'Active') {
            $('#activeEditBtn').addClass('active');
        } else if (cols[3].innerText === 'Inactive') {
            $('#inactiveEditBtn').addClass('active');
        }

        $('#editModal').modal('show');
        });

        $('#saveEditBtn').click(function() {
        var nim = $('#nimEdit').val();
        var nama = $('#nameEdit').val();
        var alamat = $('#addressEdit').val();
        var status = "";

        if ($("#activeEditBtn").hasClass("active")) {
            status = "Active";
        } else if ($("#inactiveEditBtn").hasClass("active")) {
            status = "Inactive";
        } else {
            status = "Unknown";
        }

        var row = $('#tableBody').find('td:contains(' + nim + ')').closest('tr');
        row.find('td:eq(1)').text(nama);
        row.find('td:eq(2)').text(alamat);
        row.find('td:eq(3)').text(status);
        
        $('#editModal').modal('hide');
        });

    //=======================================================================================//


    //================================= LOGIKA UNTUK SEARCH BAR =============================//

        $('#searchBar').on('keyup', function() {
            var searchText = $(this).val().toUpperCase();
            $('#tableBody tr').each(function() {
                var rowData = $(this).find('td:eq(1)').text().toUpperCase();
                if (rowData.includes(searchText)) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        });

    //======================================================================================//

    // ================================= LOGIKA UNTUK ALERT ============================= //

        //DELETE
        $('#deleteConfirmBtn').click(function() {
            $('#deleteToast').toast('show');
        });

        //UPDATE
        $('#saveEditBtn').click(function() {
            $('#updateToast').toast('show');
        });

    //=========================================================================================// 


    // ========================= LOGIKA MOTION PADA NAVBAR ==================================//

        $('a').click(function(e) {
			e.preventDefault();
			const goTo = this.getAttribute("href");
			$('body').addClass('fade-out');
			setTimeout(function(){
			  window.location = goTo;
			}, 500);
		});

    // =================================================================================== //
    

    // ======================= JAM INFO ================================================== //

    function updateJam() {
        const sekarang = new Date();
        let jam = sekarang.getHours();
        let menit = sekarang.getMinutes();
        let detik = sekarang.getSeconds();
        let ampm = jam >= 12 ? 'PM' : 'AM'; 
        jam = jam % 12; 
        jam = jam ? jam : 12; 
        jam = jam < 10 ? '0' + jam : jam;
        menit = menit < 10 ? '0' + menit : menit;
        detik = detik < 10 ? '0' + detik : detik;

        const waktu = jam + ' : ' + menit + ' : ' + detik + ' ' + ampm;
        $('#jam').text(waktu);
        setTimeout(updateJam, 1000);
    }
    updateJam();

    // =================================== LOGIKA USERNAME =============================================== //

    var username = localStorage.getItem("username");
        if (username) {
            $("#namaOutput").append("<div class='m-3 text-white p-2' id='iniUsername'; '><h2>Welcome, " + username + "!</h2></div>");
        }

</script>
</body>
</html>